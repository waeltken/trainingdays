(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{451:function(t,e,a){t.exports=a.p+"assets/img/TMArchitecture.ca56d9d4.png"},452:function(t,e){t.exports="data:image/png;base64,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"},453:function(t,e,a){t.exports=a.p+"assets/img/CloudShell1.af6f63c1.png"},454:function(t,e,a){t.exports=a.p+"assets/img/CloudShell2.3a511722.png"},455:function(t,e,a){t.exports=a.p+"assets/img/testvmyellow.aea3026f.png"},456:function(t,e,a){t.exports=a.p+"assets/img/testvmgreen.12c7f72b.png"},457:function(t,e,a){t.exports=a.p+"assets/img/testvmblue.c0cd4c61.png"},458:function(t,e,a){t.exports=a.p+"assets/img/testvmred.e245166e.png"},793:function(t,e,a){"use strict";a.r(e);var s=a(44),r=Object(s.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"challenge-11-networking-distribute-traffic-across-global-azure-regions-for-optimal-latency-and-availability-using-traffic-manager"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#challenge-11-networking-distribute-traffic-across-global-azure-regions-for-optimal-latency-and-availability-using-traffic-manager"}},[t._v("#")]),t._v(" Challenge 11: Networking - Distribute traffic across global Azure regions for optimal latency and availability using Traffic Manager")]),t._v(" "),s("h2",{attrs:{id:"here-is-what-you-will-learn-🎯"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#here-is-what-you-will-learn-🎯"}},[t._v("#")]),t._v(" Here is what you will learn 🎯")]),t._v(" "),s("ul",[s("li",[t._v("How to setup Traffic Manager using the Azure portal.")]),t._v(" "),s("li",[t._v("Setup 2 endpoints located in 2 Azure regions ('North Europe', 'West Europe')")]),t._v(" "),s("li",[t._v("Configure load balancing based on clients origin geography.")])]),t._v(" "),s("p",[t._v("Our "),s("strong",[t._v("final architecture")]),t._v(" will look like this:\n"),s("img",{attrs:{src:a(451),alt:"Final architecture"}})]),t._v(" "),s("p",[t._v("To speed things up  you will first deploy the "),s("em",[t._v("start point")]),t._v(" and then you will add the external "),s("em",[t._v("Traffic Manager")]),t._v(".")]),t._v(" "),s("h2",{attrs:{id:"table-of-contents"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#table-of-contents"}},[t._v("#")]),t._v(" Table of Contents")]),t._v(" "),s("ol",[s("li",[s("a",{attrs:{href:"#introduction-traffic-manager"}},[t._v("Introduction Traffic Manager")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#deploy-the-starting-point"}},[t._v("Deploy the Starting Point")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#deploy-a-traffic-manager-instance"}},[t._v("Deploy a Traffic Manager Instance")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#cleanup"}},[t._v("Cleanup")])])]),t._v(" "),s("h2",{attrs:{id:"introduction-traffic-manager"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#introduction-traffic-manager"}},[t._v("#")]),t._v(" Introduction Traffic Manager")]),t._v(" "),s("p",[t._v("The "),s("a",{attrs:{href:"https://docs.microsoft.com/en-us/azure/traffic-manager/traffic-manager-overview",target:"_blank",rel:"noopener noreferrer"}},[t._v("Traffic Manager"),s("OutboundLink")],1),t._v(" uses DNS to load balance traffic to endpoints across Azure regions. It can help you to:")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("provide optimal latency")]),t._v(" by serving clients from the nearest location.")]),t._v(" "),s("li",[s("strong",[t._v("increase availability")]),t._v(" as it monitors its endpoints and provides failover.")]),t._v(" "),s("li",[s("strong",[t._v("redirect traffic")]),t._v(" to online endpoints while others are in maintenance.")])]),t._v(" "),s("h2",{attrs:{id:"deploy-the-starting-point"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#deploy-the-starting-point"}},[t._v("#")]),t._v(" Deploy the Starting Point")]),t._v(" "),s("p",[t._v("Now let's create some VMs using the 'Cloud Shell' in the Azure Portal. When being asked choose "),s("em",[t._v("PowerShell")]),t._v(" this time.")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("[Azure Portal] \n-> Click the 'Cloud Shell' symbol close to your login details on the right upper corner\n")])])]),s("p",[s("img",{attrs:{src:a(452),alt:"Cloud Shell"}}),t._v(")")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("📝 The 'Cloud Shell' is an in-browser-accessible shell for managing Azure resources. It already has the required SDKs and tools installed to interact with Azure. You can use either Bash or PowerShell.")])]),t._v(" "),s("p",[t._v("The first time you use the 'Cloud Shell' you will be asked to setup a storage account e.g. to store files you have uploaded persistently. See the "),s("a",{attrs:{href:"https://docs.microsoft.com/en-us/azure/cloud-shell/persisting-shell-storage",target:"_blank",rel:"noopener noreferrer"}},[t._v("documentation"),s("OutboundLink")],1),t._v(" formore details.")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("[Azure Portal] -> Click 'Show advanced settings'\n")])])]),s("p",[s("img",{attrs:{src:a(453),alt:"Cloud Shell Storage Account Setup"}})]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("Name")]),t._v(" "),s("th",[t._v("Value")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("em",[t._v("Subscription")])]),t._v(" "),s("td",[t._v("%Your subscription%")])]),t._v(" "),s("tr",[s("td",[s("em",[t._v("Cloud Shell Region")])]),t._v(" "),s("td",[t._v("West Europe")])]),t._v(" "),s("tr",[s("td",[s("em",[t._v("Resource Group")])]),t._v(" "),s("td",[t._v("rg-cloudshell")])]),t._v(" "),s("tr",[s("td",[s("em",[t._v("Storage Account")])]),t._v(" "),s("td",[t._v("%some unique value%")])]),t._v(" "),s("tr",[s("td",[s("em",[t._v("File Share")])]),t._v(" "),s("td",[t._v("cloudshell")])])])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("[Azure Portal] \n-> Create storage\n")])])]),s("p",[t._v("Once successful your shell should appear at the bottom of the page:")]),t._v(" "),s("p",[s("img",{attrs:{src:a(454),alt:"Cloud Shell in the Azure portal"}})]),t._v(" "),s("p",[t._v("To setup the starting point, copy & paste the following code into the Cloud Shell:")]),t._v(" "),s("div",{staticClass:"language-PowerShell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-powershell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#Creates some resource groups in different Azure regions")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("New-AzResourceGroup")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Name "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'rg-wwwlb-NE'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Location "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'North Europe'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("New-AzResourceGroup")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Name "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'rg-wwwlb-WE'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Location "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'West Europe'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("New-AzResourceGroup")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Name "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'rg-wwwlb'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Location "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'North Europe'")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$TemplateParameters")]),t._v(" = @"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"adminUser"')]),t._v(" = "),s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("[string]")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'demouser'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"adminPassword"')]),t._v(" = "),s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("[System.Security.SecureString]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Read-Host")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Prompt "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"adminUser password please"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("AsSecureString"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vmNames"')]),t._v(" = "),s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("[array]")]),t._v("@"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vmblue'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vmred'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vmSize"')]),t._v(" = "),s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("[string]")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Standard_F2s_v2'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# or 'Standard_B2s'")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"DiskSku"')]),t._v(" = "),s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("[string]")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'StandardSSD_LRS'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])])]),s("p",[t._v("Enter the password as asked. Then execute the deployment by adding 2 lines")]),t._v(" "),s("div",{staticClass:"language-PowerShell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-powershell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#will create some vms in different Azure regions in parallel")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("New-AzResourceGroupDeployment")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Name "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'NE'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("TemplateUri "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://raw.githubusercontent.com/azuredevcollege/trainingdays/master/day1/challenge-11/challengestart/challengestart.json"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("ResourceGroupName "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'rg-wwwlb-NE'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("TemplateParameterObject "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$TemplateParameters")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("AsJob\n\n"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$TemplateParameters")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("vmNames = @"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vmyellow'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vmgreen'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("New-AzResourceGroupDeployment")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Name "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'WE'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("TemplateUri "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://raw.githubusercontent.com/azuredevcollege/trainingdays/master/day1/challenge-11/challengestart/challengestart.json"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("ResourceGroupName "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'rg-wwwlb-WE'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("TemplateParameterObject "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$TemplateParameters")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("AsJob  \n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#wait until both deployments are done")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get-job")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("State Running "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("wait-job")]),t._v("  \n\n")])])]),s("h2",{attrs:{id:"deploy-a-traffic-manager-instance"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#deploy-a-traffic-manager-instance"}},[t._v("#")]),t._v(" Deploy a Traffic Manager Instance")]),t._v(" "),s("p",[t._v("Add the "),s("a",{attrs:{href:"https://docs.microsoft.com/en-us/azure/traffic-manager/quickstart-create-traffic-manager-profile#add-traffic-manager-endpoints",target:"_blank",rel:"noopener noreferrer"}},[t._v("Traffic Manager Profile"),s("OutboundLink")],1),t._v(" in resource group "),s("code",[t._v("rg-wwwlb")]),t._v(" with a routing method based on e.g. performance.")]),t._v(" "),s("p",[t._v("Add 2 endpoints to the traffic manager.")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("Endpoint 1")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("Name")]),t._v(" "),s("th",[t._v("Value")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("em",[t._v("Type")])]),t._v(" "),s("td",[t._v("Azure endpoint")])]),t._v(" "),s("tr",[s("td",[s("em",[t._v("Name")])]),t._v(" "),s("td",[t._v("Dublin")])]),t._v(" "),s("tr",[s("td",[s("em",[t._v("Target resource type")])]),t._v(" "),s("td",[t._v("Public IP address")])]),t._v(" "),s("tr",[s("td",[s("em",[t._v("Public IP address")])]),t._v(" "),s("td",[t._v("pip-wwwlb-NE")])])])])]),t._v(" "),s("li",[s("p",[t._v("Endpoint 2")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("Name")]),t._v(" "),s("th",[t._v("Value")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("em",[t._v("Type")])]),t._v(" "),s("td",[t._v("Azure endpoint")])]),t._v(" "),s("tr",[s("td",[s("em",[t._v("Name")])]),t._v(" "),s("td",[t._v("Amsterdam")])]),t._v(" "),s("tr",[s("td",[s("em",[t._v("Target resource type")])]),t._v(" "),s("td",[t._v("Public IP address")])]),t._v(" "),s("tr",[s("td",[s("em",[t._v("Public IP address")])]),t._v(" "),s("td",[t._v("pip-wwwlb-WE")])])])])])]),t._v(" "),s("p",[t._v("Now test by opening the traffic managers DNS name in your browser (you might need to open multiple different browsers to see some change):")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[s("img",{attrs:{src:a(455),alt:"VM Yellow"}})]),t._v(" "),s("th",[s("img",{attrs:{src:a(456),alt:"VM Green"}})]),t._v(" "),s("th",[s("img",{attrs:{src:a(457),alt:"VM Blue"}})]),t._v(" "),s("th",[s("img",{attrs:{src:a(458),alt:"VM Red"}})])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("vmyellow (Amsterdam)")]),t._v(" "),s("td",[t._v("vmgreen (Amsterdam)")]),t._v(" "),s("td",[t._v("vmblue (Dublin)")]),t._v(" "),s("td",[t._v("vmred (Dublin)")])])])]),t._v(" "),s("h2",{attrs:{id:"cleanup"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cleanup"}},[t._v("#")]),t._v(" Cleanup")]),t._v(" "),s("p",[t._v("Delete the resource groups "),s("code",[t._v("rg-wwwlb....")]),t._v(" or execute the following commands in the Cloud Shell:")]),t._v(" "),s("div",{staticClass:"language-PowerShell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-powershell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Remove-AzResourceGroup")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Name "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'rg-wwwlb-NE'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Force "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("AsJob\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Remove-AzResourceGroup")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Name "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'rg-wwwlb-WE'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Force "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("AsJob\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Remove-AzResourceGroup")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Name "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'rg-wwwlb'")]),t._v("    "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Force "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("AsJob\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Get-Job")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("State Running "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Wait-Job")]),t._v("\n")])])]),s("p",[s("RouterLink",{attrs:{to:"/day1/challenge-10/"}},[t._v("◀ Previous challenge")]),t._v(" | "),s("RouterLink",{attrs:{to:"/day1/"}},[t._v("🔼 Day 1")]),t._v(" | "),s("RouterLink",{attrs:{to:"/day1/challenge-12/"}},[t._v("Next challenge ▶")])],1)])}),[],!1,null,null,null);e.default=r.exports}}]);